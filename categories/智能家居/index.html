<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><meta name="keywords"><title>Category: 智能家居 - 学海扁舟</title><meta property="og:type" content="blog"><meta property="og:title" content="学海扁舟"><meta property="og:url" content="https://ermao.live/"><meta property="og:site_name" content="学海扁舟"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ermao.live/img/og_image.png"><meta property="article:author" content="Liang Zuoting"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ermao.live"},"headline":"学海扁舟","image":["https://ermao.live/img/og_image.png"],"author":{"@type":"Person","name":"Liang Zuoting"},"description":""}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-1192763073074487" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="学海扁舟" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">Categories</a></li><li class="is-active"><a href="#" aria-current="page">智能家居</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-07-05T14:22:53.000Z" title="2021-07-05T14:22:53.000Z">2021-07-05</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">5 minutes read (About 695 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E5%A4%96%E9%93%BEJellyfin%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E9%A1%B5%E5%9C%B0%E5%9D%80.html">外链 Jellyfin 视频播放页地址</a></h1><div class="content"><h2 id="我自己的检索服务"><a href="#我自己的检索服务" class="headerlink" title="我自己的检索服务"></a>我自己的检索服务</h2><p>本人珍藏的视频比较多，有 TB 级别，所以之前我通过人工给视频文件打 tag 的方式，自创了一套文件检索系统。比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snis243_吉川爱美_单体_好身材_漂亮.mp4</span><br></pre></td></tr></table></figure>
<p>这样一个文件名，约定以下划线分隔 tag，且第一个 tag 总是视频标题。</p>
<p>生成检索数据库后，我用 Sanic + React 实现了 B/S 结构的检索服务。</p>
<p>首页展示所有的 tag：</p>
<p><img src="/images/AVIndex/index.jpg" alt=""></p>
<p>检索结果页列出所有的匹配视频：</p>
<p><img src="/images/AVIndex/search.jpg" alt=""></p>
<p>因为是在本地播放，Windows 上有比较万能的播放器，所以当时就没做转码服务，直接用默认浏览器播放选中视频即可。</p>
<p>这套系统很符合我个人阅片习惯，可以依着自己当时的心情按 tag 选片。</p>
<h2 id="把-Jellyfin-和检索服务结合起来"><a href="#把-Jellyfin-和检索服务结合起来" class="headerlink" title="把 Jellyfin 和检索服务结合起来"></a>把 Jellyfin 和检索服务结合起来</h2><p>6.18 入手了群晖 NAS，支持 Docker。赶紧把电脑上珍藏了好久的视频资源拷贝到了 NAS 上一份，也学别人在 Docker 上用 Jellyfin 搭建了个视频播放服务。</p>
<p>但是 Jellyfin 不识别我的 tag 约定，我的检索系统又没有转码播放服务，两边都用得不顺手。就想到把两边的功能结合一下，用检索系统选片后，跳转到 Jellyfin 的视频详细页面，利用 Jellyfin 播放视频。</p>
<p>Jellyfin 视频页面的地址格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.3.34:8096&#x2F;web&#x2F;index.html#!&#x2F;details?serverId&#x3D;xxxxxx&amp;id&#x3D;xxxxxxxx</span><br></pre></td></tr></table></figure>

<p><code>serverId</code> <code>id</code> 都是一个 32 字符的字符串，<code>serverId</code> 值可以视为一个常量，硬编码到代码里即可。难的是 <code>id</code> 参数值的规则。</p>
<p>最终通过翻阅 Jellyfin 源码，发现所有媒体信息都存储在 <code>library.db</code> 的 sqlite 数据库中，在一个叫 <code>TypedbaseItems</code> 的表里，存储了视频文件路径到 <code>PresentationUniqueKey</code> 的映射关系，这个 <code>PresentationUniqueKey</code> 就是 <code>id</code>。</p>
<p>直接把我生成检索数据库的 <code>generator.py</code> 改掉，无需再遍历文件系统，通过读取 <code>library.db</code> 就满足需求了。</p>
<p>至此，当我在自己的检索服务中选中某项后，就可以跳转到视频对应的 Jellyfin 页面了。</p>
<h2 id="小小后记"><a href="#小小后记" class="headerlink" title="小小后记"></a>小小后记</h2><p>最开始盲猜 <code>serverId</code> <code>id</code> 都是 md5 或其它摘要算法的产出，在 Jellyfin 源码里一顿全局搜索，浪费了一些时间。后来才想到可以直接查阅它的数据库，”暴破”文件到 <code>id</code> 的映射。事后才发现，<code>id</code> 是 Guid 来的，根本不是通过对文件信息摘要所得。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-05-12T19:00:39.000Z" title="2021-05-12T19:00:39.000Z">2021-05-13</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">6 minutes read (About 937 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E9%80%9A%E8%BF%87%E4%BA%BA%E4%BD%93%E8%AF%86%E5%88%AB%E5%AE%9E%E7%8E%B0%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E6%8E%A7%E5%88%B6.html">通过人体识别实现智能家居控制</a></h1><div class="content"><p>市面上普遍使用的人体检测方案是红外传感器，缺点很多且显得特别弱智：</p>
<ul>
<li>只能检测运动物体；</li>
<li>完全不能区分人或其它活动物体；</li>
<li>不能区分人体是进入或离开某一区域。</li>
</ul>
<p>设想一个最简单普遍的生活场景：当我晚上 7 点步入餐厅时，餐厅灯光应随之亮起；同理，当识别到餐厅无人时，应自动将餐厅灯关闭。通过人体传感器是死活做不到这点的。</p>
<p>转换思路，视餐厅为一平面图，上述问题即可抽象成 “如何检测一张图片内是否有人存在”，解决方案就显而易见了——目标检测。</p>
<h2 id="识别算法"><a href="#识别算法" class="headerlink" title="识别算法"></a>识别算法</h2><p><a href="https://github.com/ultralytics/yolov5">YOLOv5</a> 没能部署到树莓派上（官方 32 位系统），也没深究。转头发现了 <a href="https://github.com/PaddlePaddle/Paddle-Lite">Paddle-Lite</a> ，专为移动端、嵌入式硬件开发的深度学习推理框架。Paddle 提供了超多<a href="https://github.com/PaddlePaddle/PaddleDetection/blob/release/2.0/README_cn.md#%E6%A8%A1%E5%9E%8B%E5%BA%93">预训练模型</a> ，我选取了其中尺寸最小的<a href="https://github.com/PaddlePaddle/PaddleDetection/blob/release/2.0/static/configs/mobile/README.md">MobileNetV3 Small</a> ，实测在树莓派4 上每次推理仅需 &lt; 200 ms。</p>
<h2 id="摄像头"><a href="#摄像头" class="headerlink" title="摄像头"></a>摄像头</h2><p>这甚至是个比识别率还严重的问题。基本上所有的 USB 摄像头都不具备夜视能力，用这种摄像头正应了达文西手电筒的梗。无奈买了一个<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.19.588a4ecbY3esnZ&id=619210290310&ns=1&abbucket=17#detail">网络摄像头</a>，因为需通过 RTSP 协议获取视频流，缺点同样明显：</p>
<ul>
<li>占用宽带；</li>
<li>高延时；</li>
<li>需要解码。</li>
</ul>
<p>所以我现在设定的采集帧率仅为 2 帧/秒，尽量降低树莓派的功耗。</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul>
<li><p>识别速度。</p>
<blockquote>
<p>暂时没找到只一个人体分类的模型，这是推理速度的一个瓶颈。终极方案大概只能是自己训练模型。</p>
</blockquote>
</li>
<li><p>识别正确率。</p>
<blockquote>
<p>一个是模型没有按场景训练过；一个是单一摄像头角度固定，需要一个摄像头阵列从不同角度采集后综合得出是否有人的最终结论。这不管是从经济角度还是技术角度，都是个大工程。</p>
</blockquote>
</li>
<li><p>视频采集延时。</p>
<blockquote>
<p>得继续找一个更靠谱的摄像头，至少 3 米的夜视能力是基本要求，USB 有线是最好的了。现有的网络摄像头方案，大概可以通过把摄像头和树莓派都有线连接到路由器降低延时。</p>
</blockquote>
</li>
</ul>
<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p>(<a href="https://github.com/LiangZuoting/PersonMonitor">https://github.com/LiangZuoting/PersonMonitor</a>) 。PersonMonitor 把识别结果推送到 <a href="https://github.com/LiangZuoting/SmartHome">SmartHome</a> Web API，SmartHome 控制灯具做出响应。</p>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>摄像头问题已完美解决。</p>
<ol>
<li><p>在 1688 上淘到了<a href="https://detail.1688.com/offer/598088416475.html?spm=a360q.8274423.0.0.49c84c9a63XQ2p">这个 USB 接口的夜视摄像头</a>。</p>
</li>
<li><p>深究之后发现，摄像头延时问题除 RTSP 协议原因外，还有一个很重要的点是 OpenCV 会默认缓存 4-5 帧图像。解决方案就是把摄像头采集放在单独线程里进行，且采集速度应明显高于识别速度。比如我的设定是每 200ms 识别一次，每 100ms 采集一次，利用 100ms 的时间差尽可能丢掉前边的缓存帧，只保留最新的一帧。这样，识别也是基于最新帧了。</p>
</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-04-17T07:02:42.000Z" title="2021-04-17T07:02:42.000Z">2021-04-17</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">3 minutes read (About 460 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E7%BB%88%E7%AB%AF%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1.html">智能家居终端控制系统设计</a></h1><div class="content"><p>手里有闲置的 Surface 3 平板、Android 平板、Android 手机各一台，正好可以把它们分散固定在常驻区域的墙面上，一可以用作多媒体终端（这个功能是现成的），二就是可以用作智能家居的控制终端，和我的树莓派（中控系统）进行双工通信。</p>
<p>这是我设想的语音助手外的另一个重要的控制路径。比如，你已经在终端附近时，或超出拾音范围时，或者你恰巧在一直嗡嗡响的洗衣机周边时，通过屏幕终端下发命令应该是更优解。</p>
<p><img src="/images/smart-home/floor-plan.jpg" alt=""></p>
<p>3 个固定的终端大概是分别放在厨房、客厅、阳台。树莓派作为服务端，允许多个客户端的接入，推送设备状态信息到所有终端。最终的网络连接很可能不是图里这种 all to all 的结果，因为我很可能有两段路由。</p>
<p>终端的软件实现，大致确定以 web 页面形式实现，否则分别开发原生应用的代价太大了。前端框架用 React，小巧、组件化实现，上手简单；搭配 <a href="https://github.com/picturepan2/spectre">Spectre</a> CSS 库，开发一个看起来差不多的 UI 应该是够了。</p>
<p>网络传输自然是 Websocket 了，树莓派是服务端，各个终端是客户端。因为是局域网传输，数据量也不大，所以应该直接传输 json 数据。具体的数据模型待定，跟最后选定的家电的能力强关联，现在写得太细也没什么意义。</p>
<h1 id="待续…"><a href="#待续…" class="headerlink" title="待续…"></a>待续…</h1></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-04-13T23:30:08.000Z" title="2021-04-13T23:30:08.000Z">2021-04-14</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">3 minutes read (About 518 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/DeepSpeech%E8%B0%83%E5%8F%82%E5%A4%87%E5%BF%98.html">DeepSpeech 调参备忘</a></h1><div class="content"><h2 id="最优解"><a href="#最优解" class="headerlink" title="最优解"></a>最优解</h2><p>迄今为止训练效果最好的一组参数集是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python DeepSpeech.py --train_files &#x2F;mnt&#x2F;g&#x2F;myowncorpus&#x2F;dst.csv --dev_files &#x2F;mnt&#x2F;g&#x2F;myowncorpus&#x2F;dst.csv --export_dir &#x2F;mnt&#x2F;g&#x2F;myowncorpus&#x2F; --checkpoint_dir &#x2F;mnt&#x2F;g&#x2F;myowncorpus&#x2F;checkpoints128 --alphabet_config_path &#x2F;mnt&#x2F;g&#x2F;myowncorpus&#x2F;alphabet.txt --dropout_rate 0.3 --early_stop True --n_hidden 128 --export_file_name hidden128 --export_author_id hidden128 --epochs 200 --export_model_version 0.0.3 --lm_alpha 0.6940122363709647 --lm_beta 4.777924224113021 --export_language cmn-Hans-CN --reduce_lr_on_plateau False --es_epochs 800 --test_files &#x2F;mnt&#x2F;g&#x2F;myowncorpus&#x2F;dst.csv --learning_rate 0.001 --beam_width 100</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>checkpoint_dir</code> checkpoint 路径。checkpoint 是一种增量训练机制，允许保存之前最近的、最优的若干次训练结果，下一次加载后继续训练。</p>
</li>
<li><p><code>n_hidden</code> 隐含层数量。对隐含层解释地比较通俗易懂的是<a href="https://blog.csdn.net/JH0lmes/article/details/82777269">这篇文章</a> 。直接影响有 3 个：</p>
</li>
</ul>
<p>1) 训练速度，越小越快</p>
<p>2) 模型文件尺寸，值越小文件尺寸越小</p>
<p>3) 训练效果，无绝对好坏，取决于训练集。我是从默认的 2048 一直减半到现在的 128 测试出来的最优值。</p>
<p>调整 hidden 必须从头训练，不能沿用之前的 checkpoint 。</p>
<ul>
<li><p><code>alphabet_config_path</code> 字母表。中文训练即训练集中出现的所有汉字的集合。</p>
</li>
<li><p><code>dropout_rate</code> 随机丢掉隐含层的比例。</p>
</li>
<li><p><code>epochs</code> 训练次数。不是越多越好，反而有可能变坏。像我现在数据集只有 113 条，最佳的训练次数是 200 次。</p>
</li>
<li><p><code>lm_alpha</code> <code>lm_beta</code> 语言模型参数，取值是官方推荐值。</p>
</li>
</ul>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>总是有若干条目识别特别差，最典型的是这个：</p>
<blockquote>
<p>语音：旺财关客厅窗帘</p>
<p>文本：旺财把客厅窗帘</p>
</blockquote>
<blockquote>
<p>语音：旺财开书房灯</p>
<p>文本：旺财把书房灯</p>
</blockquote>
<p>调试了各种参数还是不能解决。怀疑跟数据集太小、相关录音录制得不清楚有关系。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><p>隐藏层：<a href="">https://blog.csdn.net/JH0lmes/article/details/82777269</a></p>
</li>
<li><p>CNN 入门讲解：什么是dropout?：<a href="">https://zhuanlan.zhihu.com/p/77609689</a></p>
</li>
<li><p><a href="">https://github.com/mozilla/DeepSpeech/releases/tag/v0.9.3</a></p>
</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-04-07T14:39:21.000Z" title="2021-04-07T14:39:21.000Z">2021-04-07</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">2 minutes read (About 307 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E8%AF%AD%E6%96%99%E8%AE%BE%E8%AE%A1.html">自定义语音助手语料设计</a></h1><div class="content"><p>旺财</p>
<p>客厅</p>
<p>卧室</p>
<p>书房</p>
<p>窗帘</p>
<p>窗户</p>
<p>空调</p>
<p>灯</p>
<p>开</p>
<p>关</p>
<p>开灯</p>
<p>关灯</p>
<p>开窗帘</p>
<p>关窗帘</p>
<p>开窗户</p>
<p>关窗户</p>
<p>开空调</p>
<p>关空调</p>
<p>旺财开灯</p>
<p>旺财开客厅灯</p>
<p>旺财把客厅灯打开</p>
<p>旺财关窗帘</p>
<p>旺财关客厅窗帘</p>
<p>旺财把客厅窗帘关上</p>
<p>旺财开窗帘</p>
<p>旺财开客厅窗帘</p>
<p>旺财把客厅窗帘打开</p>
<p>旺财开空调，二十五度</p>
<p>旺财开窗户</p>
<p>旺财开客厅窗户</p>
<p>旺财把客厅窗户打开</p>
<p>旺财关窗户</p>
<p>旺财关客厅窗户</p>
<p>旺财把客厅窗户关上</p>
<p>旺财开卧室灯</p>
<p>旺财把卧室灯打开</p>
<p>旺财关卧室窗帘</p>
<p>旺财把卧室窗帘关上</p>
<p>旺财开卧室窗帘</p>
<p>旺财把卧室窗帘打开</p>
<p>旺财开卧室窗户</p>
<p>旺财把卧室窗户打开</p>
<p>旺财关卧室窗户</p>
<p>旺财把卧室窗户关上</p>
<p>旺财开书房灯</p>
<p>旺财把书房灯打开</p>
<p>旺财关书房窗帘</p>
<p>旺财把书房窗帘关上</p>
<p>旺财开书房窗帘</p>
<p>旺财把书房窗帘打开</p>
<p>旺财开书房窗户</p>
<p>旺财把书房窗户打开</p>
<p>旺财关书房窗户</p>
<p>旺财把书房窗户关上</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-04-07T13:56:57.000Z" title="2021-04-07T13:56:57.000Z">2021-04-07</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">5 minutes read (About 816 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Ubuntu%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E8%AE%AD%E7%BB%83DeepSpeech.html">Ubuntu上安装并训练DeepSpeech</a></h1><div class="content"><p>全程参照<a href="https://deepspeech.readthedocs.io/en/v0.9.3/TRAINING.html#">官方文档</a> ，仅少许浅坑。这篇文章算是摘要 + 翻译 + 注解吧。</p>
<h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><ul>
<li>Python 3.6<blockquote>
<p>严格遵守，实测 3.8 版本会有诸多错误。</p>
</blockquote>
</li>
<li>Mac 或 Linux 环境<blockquote>
<p>建议避过 Mac，缺失的依赖比 Linux 多很多，问题也多，我是半途放弃 Mac 转到 Ubuntu 的。可以通过启用 Windows 10 的 WSL 功能创建 Ubuntu 环境，可以使用所有的硬件能力。</p>
</blockquote>
</li>
<li>CUDA 10.0 / CuDNN v7.6 per Dockerfile.<blockquote>
<p>这条为非必须，因为我是新手，直接用 CPU 训练的。</p>
</blockquote>
</li>
</ul>
<h2 id="下载-DeepSpeech-源码"><a href="#下载-DeepSpeech-源码" class="headerlink" title="下载 DeepSpeech 源码"></a>下载 DeepSpeech 源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --branch v0.9.3 https:&#x2F;&#x2F;github.com&#x2F;mozilla&#x2F;DeepSpeech</span><br></pre></td></tr></table></figure>

<h2 id="创建-Python-虚拟环境"><a href="#创建-Python-虚拟环境" class="headerlink" title="创建 Python 虚拟环境"></a>创建 Python 虚拟环境</h2><p>使用默认的 <code>venv</code> 方式创建：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv ~&#x2F;tmp&#x2F;deepspeech-train-venv&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="激活虚拟环境"><a href="#激活虚拟环境" class="headerlink" title="激活虚拟环境"></a>激活虚拟环境</h2><p>source ~/tmp/deepspeech-train-venv/bin/activate</p>
<blockquote>
<p><strong>然后下边的所有操作都应该在此虚拟环境中进行。</strong></p>
</blockquote>
<h2 id="安装-DeepSpeech-依赖"><a href="#安装-DeepSpeech-依赖" class="headerlink" title="安装 DeepSpeech 依赖"></a>安装 DeepSpeech 依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd DeepSpeech</span><br><span class="line">pip3 install --upgrade pip&#x3D;&#x3D;20.2.2 wheel&#x3D;&#x3D;0.34.2 setuptools&#x3D;&#x3D;49.6.0</span><br><span class="line">pip3 install --upgrade -e .</span><br></pre></td></tr></table></figure>

<p>后续如果有更新 DeepSpeech 源码，需要再次执行上边最后一句 <code>pip3 install</code> 命令，确保依赖对得上号。</p>
<p>这个过程中会遇到一个错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ERROR: After October 2020 you may experience errors when installing or updating packages. This is because pip will change the way that it resolves dependency conflicts.</span><br><span class="line"></span><br><span class="line">We recommend you use --use-feature&#x3D;2020-resolver to test your packages with the new resolver before it becomes the default.</span><br><span class="line"></span><br><span class="line">tensorflow 1.15.4 requires numpy&lt;1.19.0,&gt;&#x3D;1.16.0, but you&#39;ll have numpy 1.19.5 which is incompatible.</span><br></pre></td></tr></table></figure>

<p>依照错误提示卸载 <code>numpy</code> 再装一个指定版本的包即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 uninstall numpy</span><br><span class="line">pip3 install numpy&#x3D;&#x3D;1.16.0</span><br><span class="line">pip3 install tensorflow&#x3D;&#x3D;1.15.4</span><br></pre></td></tr></table></figure>

<p>然后安装一个 <code>webrtcvad</code> 的依赖包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-dev</span><br></pre></td></tr></table></figure>

<h2 id="执行-DeepSpeech-预置脚本完成一次简单训练"><a href="#执行-DeepSpeech-预置脚本完成一次简单训练" class="headerlink" title="执行 DeepSpeech 预置脚本完成一次简单训练"></a>执行 DeepSpeech 预置脚本完成一次简单训练</h2><p><strong>跳转到 DeepSpeech 根目录</strong> 后执行以下脚本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;run-ldc93s1.sh</span><br></pre></td></tr></table></figure>

<p>上边脚本会下载语料，处理成 DeepSpeech 可识别格式，然后进行训练。下载的语料和处理后的数据都保存在 <code>DeepSpeech/data/ldc93s1/</code> 目录下。</p>
<blockquote>
<p><strong>DeepSpeech 要求必须用 16 bit 位深、单声道的音频进行训练、识别；且训练与识别所用的音频的采样率也必须相同。</strong></p>
</blockquote>
<p>几分钟就训练完了。但是这个脚本没有将训练后的模型保存成文件，可以打开脚本，给在最后边执行的 <code>DeepSpeech.py</code> 脚本添加一个参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python -u DeepSpeech.py --noshow_progressbar \</span><br><span class="line">  --train_files data&#x2F;ldc93s1&#x2F;ldc93s1.csv \</span><br><span class="line">  --test_files data&#x2F;ldc93s1&#x2F;ldc93s1.csv \</span><br><span class="line">  --train_batch_size 1 \</span><br><span class="line">  --test_batch_size 1 \</span><br><span class="line">  --n_hidden 100 \</span><br><span class="line">  --epochs 200 \</span><br><span class="line">  --checkpoint_dir &quot;$checkpoint_dir&quot; \</span><br><span class="line">  --export_dir &#x2F;mnt&#x2F;g&#x2F; \ # 这行就是新添加的，可以将模型保存到指定目录</span><br><span class="line">  &quot;$@&quot;</span><br></pre></td></tr></table></figure>

<p>在 <code>/mnt/g/</code> 目录下会生成一个 <code>output_graph.pb</code> 模型文件。</p>
<h2 id="使用-Mozilla-提供的数据集"><a href="#使用-Mozilla-提供的数据集" class="headerlink" title="使用 Mozilla 提供的数据集"></a>使用 Mozilla 提供的数据集</h2><p>Mozilla 收集了很多语言的数据集，包括<a href="https://commonvoice.mozilla.org/zh-CN/datasets">普通话</a> 。下载下来的是一个 tar 压缩包，解压后得到一串 <code>clips/*.mp3</code> 文件和若干 <code>tsv</code> 文件。</p>
<p>执行 <code>bin/import_cv2.py</code> 脚本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin&#x2F;import_cv2.py &#x2F;path&#x2F;to&#x2F;extracted&#x2F;language&#x2F;archive</span><br></pre></td></tr></table></figure>

<p>在 <code>clips</code> 目录下创建了 <code>mp3</code> 对应的 <code>wav</code> 文件，和若干 <code>csv</code> 文件。这些就是 DeepSpeech 可识别的输入了，参照上边 <code>run-ldc93s1.sh</code> 中 <code>DeepSpeech.py</code> 脚本的用法，就可以用这些数据集训练了。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-04-06T15:20:31.000Z" title="2021-04-06T15:20:31.000Z">2021-04-06</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">3 minutes read (About 426 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E5%87%86%E5%A4%87%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B.html">准备训练自己的智能家居语音助手</a></h1><div class="content"><p>Mozilla 实现的 <a href="https://github.com/mozilla/DeepSpeech">DeepSpeech</a> 语音识别引擎可以离线使用、可以运行在树莓派 4 上，简直就是给我准备的。</p>
<p>它附赠了一个训练好的普通话模型，我暂时没有试用。但训练自己专属的语音助手明显更带感，也更能贴近自己的说话习惯。</p>
<p>比如可以给它起一个很拉风的名字——贾维斯，还可以给它取几个昵称，小贾、老贾、贾爷。每当我喊出其中任何一个名字时，它都应该能识别到我是在和它说话。</p>
<p>市面上的语音助手，多以交互式对话完成指令。比如你问它天气预报：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">我：小爱同学</span><br><span class="line">小爱同学：在</span><br><span class="line">我：今天几度</span><br><span class="line">小爱同学：今天广州 blah blah blah</span><br></pre></td></tr></table></figure>

<p>这大概是对语音助手寄托了过多的私欲吧，幻想它真得会像一个朋友甚至一个红粉知己一样存在、同你交流。这方面我就理智得多了，我只希望它能完成我的指令即可。所以我会把上述对话简化成一个问答：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">我：贾维斯今天几度</span><br><span class="line">贾维斯：今天广州 blah blah blah</span><br></pre></td></tr></table></figure>

<p>这更符合我的个性，同时也更贴合智能家居这样一个功利性极强的场景。</p>
<p>同时也会节省很多训练时间。依自己的说话习惯和智能家居这种词句范围有限的使用场景，训练语料应该不需要太多。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-04-06T04:08:20.000Z" title="2021-04-06T04:08:20.000Z">2021-04-06</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">5 minutes read (About 782 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E4%BA%A7%E5%93%81%E8%B0%83%E7%A0%94%E5%A4%87%E5%BF%98.html">智能家居产品调研备忘</a></h1><div class="content"><h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>调研中发现，小米开放了一套自研的控制协议 <a href="https://github.com/OpenMiHome/mihome-binary-protocol">https://github.com/OpenMiHome/mihome-binary-protocol</a> 。对应的 python 实现在这里 <a href="https://github.com/rytilahti/python-miio">https://github.com/rytilahti/python-miio</a> 。下文提到的云仪开窗器就是采用的 miio 。miio 涉及一个 token，看了下源码，token 大概是端到端的数据加密密钥的作用，<a href="">https://github.com/al-one/hass-xiaomi-miot#obtain-miio-token</a> 这里有获取 token 方法。</p>
<h3 id="灯具"><a href="#灯具" class="headerlink" title="灯具"></a>灯具</h3><p>yeelight。控制协议完全开放，<a href="https://www.yeelight.com/download/Yeelight_Inter-Operation_Spec.pdf，有可直接使用的">https://www.yeelight.com/download/Yeelight_Inter-Operation_Spec.pdf，有可直接使用的</a> python 包， <a href="https://pypi.org/project/yeelight/">https://pypi.org/project/yeelight/</a> 。大概看了下是参照 spec 实现的。</p>
<p>opple。有一个 python 包可用，<a href="https://pypi.org/project/pyoppleio/">https://pypi.org/project/pyoppleio/</a> 。但是有几年没有更新了，有一个 opened issue 提到已不能正常工作。以 <code>homebridge opple</code> 为关键字 google，对应插件也是年久失修状态。</p>
<p>飞利浦 hue。hue 是一个系列/平台，有蓝牙/网关两个子产品分类。蓝牙是直连终端，需自己 hack 其 app 获取协议；网关到终端是 zigbee 协议的，不是简单的透传，不知道咋 hack。</p>
<p><strong>所以选购优先级应该是 yeelight、opple、其它。</strong></p>
<h3 id="窗帘"><a href="#窗帘" class="headerlink" title="窗帘"></a>窗帘</h3><p>窗帘基本上是绿米一家独大，但是绿米应该是优先级最低的选择。多数产品要么需要网关、要么走云端，很少两点一线的产品。且协议不开放，需要自己 hack。但是其到网关的协议是开放的，<a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/xiaomi_aqara">https://github.com/home-assistant/core/tree/dev/homeassistant/components/xiaomi_aqara</a> 。运气好如果网关到窗帘是透传的话，倒是没问题。</p>
<p>其它都差不多吧。选购标准还是必须是端到端 wifi 控制的。很多所谓厂家直销的小品牌，可以尝试跟他们沟通是否可以拿到传输协议。</p>
<p>杜亚（dooya）。github 搜 dooya 有几个其它语言实现的 dooya 无线（433MHz）控制协议，没找到 wifi 版本。</p>
<p>找到一个论坛定制窗帘。<a href="">https://bbs.hassbian.com/thread-4814-1-1.html</a>，源码以 hass 插件形式开放。</p>
<p>米家协议窗帘。<a href="">https://bbs.hassbian.com/thread-11894-1-2.html</a>，<a href="">https://github.com/tiandeyu/mijia_curtain/tree/master/custom_components</a> 。看论坛讨论大概是所有遵循 MIoT-Spec 的窗帘设备都可以控制？这样的话选购范围就大了，基本上所有标识支持 小米APP/小爱音箱 的窗帘都可以用。</p>
<h3 id="开窗器"><a href="#开窗器" class="headerlink" title="开窗器"></a>开窗器</h3><p>开窗器就完全是一个散乱的市场了，全是厂家定制那种。也可以尝试跟他们要协议。</p>
<p>云仪。<a href="https://github.com/dominic2708/yunyi_windows">https://github.com/dominic2708/yunyi_windows</a> 。使用的是小米的协议方案。</p>
<h3 id="空调"><a href="#空调" class="headerlink" title="空调"></a>空调</h3><p>格力。有 python 包，<a href="https://pypi.org/project/greeclimate/">https://pypi.org/project/greeclimate/</a> 。homebridge 也有格力的插件，<a href="https://www.npmjs.com/package/homebridge-gree-heatercooler-v2">https://www.npmjs.com/package/homebridge-gree-heatercooler-v2</a> 。都是活跃更新的，问题应该不大。</p>
<p>美的。有一个 HA 插件源码包，<a href="https://github.com/mac-zhou/midea-ac-py">https://github.com/mac-zhou/midea-ac-py</a> 。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-04-02T00:44:29.000Z" title="2021-04-02T00:44:29.000Z">2021-04-02</time><span class="level-item"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span><span class="level-item">3 minutes read (About 515 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/%E9%80%9A%E8%BF%87HomeAssistant%E6%9F%A5%E8%AF%A2%E5%B8%82%E9%9D%A2%E4%B8%8A%E5%BC%80%E6%BA%90-%E5%BC%80%E6%94%BE%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E4%BA%A7%E5%93%81%E5%B0%8F%E6%94%BB%E7%95%A5.html">通过 HomeAssistant 查询市面上开源/开放协议的智能家居产品小攻略</a></h1><div class="content"><p><a href="https://www.home-assistant.io/">HomeAssistant</a> 是一个开源的、Python 实现的、<strong>可本地部署</strong> 的智能家居自动化服务。至今已集成了上千种智能家电、开放平台，比如 Yeelight、Opple（欧普）、Google Assistant 等等等等。</p>
<p>可以说，HomeAssistant 基本满足了我对智能家居中控系统的要求，尤其我一直强调的安全性问题。市面上绝大多数智能家居平台都是远程式的、不可部署的，直接引入了两大安全隐患：</p>
<ol>
<li>数据被服务提供商有意或无意地泄漏；</li>
<li>数据在远程传输过程中被截取、篡改。</li>
</ol>
<p>所以一个本地化的服务一直是我的追求。在我知道 HomeAssistant 存在之前就一直琢磨怎么利用树莓派搭建一个中控系统，无奈的是各种产品的通信协议都像一个黑盒子，无从入手。<br>直接用 HomeAssistant 又太重。前端显示我不需要，上千种的组件我肯定也用不到，其自动化的配置方式也有学习成本。所以，我最需要的只是 HomeAssistant 的源码。</p>
<p>HomeAssistant 支持的产品均以组件的形式存放在 <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components">https://github.com/home-assistant/core/tree/dev/homeassistant/components</a> 目录下，定位到某一品牌后，在其控制源码里就可以一览其实现方式。</p>
<p>以格力（gree）为例，在 <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components">https://github.com/home-assistant/core/tree/dev/homeassistant/components</a> 页面搜索 gree，跳转到 ./gree 目录，点开 <code>climate.py</code>，有如下字样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from greeclimate.device import (</span><br><span class="line">    FanSpeed,</span><br><span class="line">    HorizontalSwing,</span><br><span class="line">    Mode,</span><br><span class="line">    TemperatureUnits,</span><br><span class="line">    VerticalSwing,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>像是厂商提供的一个包，去到 <a href="https://pypi.org/">https://pypi.org/</a> 搜索包名，就找到了。文档描述其 <strong>should work for any device that also works with the Gree+ app</strong>，厉害了。</p>
<p>同样的方式，我也定位到了 Yeelight、Opple 这两个国内大厂的 python 包。</p>
<h2 id="NGO-万岁，标准万岁，但不包括-BCI。"><a href="#NGO-万岁，标准万岁，但不包括-BCI。" class="headerlink" title="NGO 万岁，标准万岁，但不包括 BCI。"></a>NGO 万岁，标准万岁，但不包括 BCI。</h2></div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="/img/avatar.png" alt="Liang Zuoting"></figure><p class="title is-size-4 is-block line-height-inherit">Liang Zuoting</p><p class="is-size-6 is-block">程序员</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>广州</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">37</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">14</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">20</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/liangzuoting" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/liangzuoting"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/C/"><span class="level-start"><span class="level-item">C++</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/C/%E5%B9%B6%E5%8F%91%E8%AE%A1%E7%AE%97/"><span class="level-start"><span class="level-item">并发计算</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/FFmpeg/"><span class="level-start"><span class="level-item">FFmpeg</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/FFmpeg-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"><span class="level-start"><span class="level-item">FFmpeg 常用命令</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Python/Sanic/"><span class="level-start"><span class="level-item">Sanic</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Qt/"><span class="level-start"><span class="level-item">Qt</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/StreamingCore/"><span class="level-start"><span class="level-item">StreamingCore</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Unity/"><span class="level-start"><span class="level-item">Unity</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E4%BD%BF%E7%94%A8-Unity-%E5%BC%80%E5%8F%91-Android-VR-%E5%BA%94%E7%94%A8/"><span class="level-start"><span class="level-item">使用 Unity 开发 Android VR 应用</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B9%B6%E5%8F%91%E8%AE%A1%E7%AE%97/"><span class="level-start"><span class="level-item">并发计算</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/%E5%B9%B6%E5%8F%91%E8%AE%A1%E7%AE%97/C/"><span class="level-start"><span class="level-item">C++</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/"><span class="level-start"><span class="level-item">智能家居</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%9D%82%E8%AE%B0/"><span class="level-start"><span class="level-item">杂记</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/AVX2/"><span class="tag">AVX2</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Animator/"><span class="tag">Animator</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C-17/"><span class="tag">C++17</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DeepSpeech/"><span class="tag">DeepSpeech</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FFmpeg/"><span class="tag">FFmpeg</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NAS-Jellyfin/"><span class="tag">NAS, Jellyfin</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NEON/"><span class="tag">NEON</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Qt/"><span class="tag">Qt</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spectre/"><span class="tag">Spectre</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VR/"><span class="tag">VR</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VideoPlayer/"><span class="tag">VideoPlayer</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XOPlayer/"><span class="tag">XOPlayer</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mono/"><span class="tag">mono</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B9%B6%E8%A1%8C-%E5%B9%B6%E5%8F%91%E8%AE%A1%E7%AE%97/"><span class="tag">并行/并发计算</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%AC%E8%99%AB/"><span class="tag">爬虫</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%A5%BF%E5%AE%89/"><span class="tag">西安</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2021-07-10T04:45:37.000Z">2021-07-10</time></p><p class="title is-6"><a class="link-muted" href="/%E8%A7%86%E9%A2%91%E7%BC%96%E8%BE%91%E5%99%A8ffcutter.html">视频编辑器ffcutter</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/FFmpeg/">FFmpeg</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-07-05T14:22:53.000Z">2021-07-05</time></p><p class="title is-6"><a class="link-muted" href="/%E5%A4%96%E9%93%BEJellyfin%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E9%A1%B5%E5%9C%B0%E5%9D%80.html">外链 Jellyfin 视频播放页地址</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-06-12T06:02:06.000Z">2021-06-12</time></p><p class="title is-6"><a class="link-muted" href="/Sanic%E8%BF%98%E4%B8%8D%E9%94%99.html">Sanic 还不错</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Python/">Python</a> / <a class="link-muted" href="/categories/Python/Sanic/">Sanic</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-05-12T19:00:39.000Z">2021-05-13</time></p><p class="title is-6"><a class="link-muted" href="/%E9%80%9A%E8%BF%87%E4%BA%BA%E4%BD%93%E8%AF%86%E5%88%AB%E5%AE%9E%E7%8E%B0%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E6%8E%A7%E5%88%B6.html">通过人体识别实现智能家居控制</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-04-17T07:02:42.000Z">2021-04-17</time></p><p class="title is-6"><a class="link-muted" href="/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E7%BB%88%E7%AB%AF%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1.html">智能家居终端控制系统设计</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="学海扁舟" height="28"></a><p class="size-small"><span>&copy; 2021 Liang Zuoting</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://ermao.live',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>